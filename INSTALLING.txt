Install Instructions -- MetagenomeScope
=======================================

Hi! These instructions are for installing the preprocessing script component
of MetagenomeScope, which can be used to generate .db files that can be
visualized in MetagenomeScope's viewer interface.

(The viewer interface is just a normal web application -- you shouldn't need to
install anything in order to use that, assuming you're using a modern web
browser with Javascript enabled. You can just open your browser to your local
copy of the viewer interface's HTML file, located in viewer/index.html.)

Hopefully these instructions should be sufficient for getting everything up
and working, but if you run into any problems please feel free to contact me
at the email address "mfedarko at umd dot edu" (with no quotes, and with the
"at" and "dot" replaced with @ and . respectively).

External Libraries Required
---------------------------

1. Python 2.7 (higher versions of Python 2.x should work, I think)
2. NumPy
3. Graphviz
4. PyGraphviz

1. Python 2.x is installed by default with many systems.
   Installation instructions for Python (as well as instructions for checking
   to see if you already have Python installed) are located here:
   https://wiki.python.org/moin/BeginnersGuide/Download

2. Installation instructions for NumPy are located here:
   https://www.scipy.org/scipylib/download.html

3. Installation instructions for Graphviz are located here:
   http://www.graphviz.org/Download.php
   NOTE that we recommend using a version of Graphviz dated on or after
   2.41.20170712.0019, due to a bug in edge routing that was fixed before
   that release. (Details regarding this issue are available at
   https://github.com/fedarko/MetagenomeScope/issues/235, if you're curious.)

4. Installation instructions for PyGraphviz are located here:
   https://pypi.python.org/pypi/pygraphviz
   It might be easiest to install PyGraphviz through "pip" or another Python
   package manager.

Compiling the SPQR Script
-------------------------

The bulk of MetagenomeScope's preprocessing script's functionality
is contained within its Python code (which is generally easily portable across
different platforms). However, the "SPQR script" in MetagenomeScope (written
in C++) requires compilation, since it uses the Open Graph Drawing Framework
(OGDF) to generate SPQR trees.

The version of the SPQR script binary provided with MetagenomeScope (located
in graph_collator/spqr) was compiled for 64-bit Linux systems. It should work
for those, but for other operating systems you will need to compile the script
to run on your particular system.

Compiling the script has four primary steps:

1. Download and install OGDF on your system.
    -Instructions for doing this are located here:
        https://github.com/ogdf/ogdf/blob/master/doc/build.md

2. Modify the OGDF_INCL variable in Makefile to point to your include/ 
   directory of OGDF.

3. Modify the OGDF_LINK variable in Makefile to point to your _release/
   directory of OGDF.

4. Run "make" to compile the SPQR script.
    -On Linux and Mac systems, this should be doable by just running
     "make" in the root directory of MetagenomeScope, assuming the
     aforementioned changes have been made.
    -On Windows systems, something like CMake or Cygwin may be needed
     to run make. (I don't have enough experience with Windows to say,
     sorry; I'll try to test this out on a Windows system eventually.)
    -You may also need to modify the COMPILER and CFLAGS variables in the
     Makefile if you're using a different C++ compiler than g++.
